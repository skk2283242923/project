<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>详情</title>
  <link href="http://www.zbird.com/favicon.ico" type="image/x-icon" rel="shortcut icon">
  <script src="js/jquery.js"></script>
  <script src="js/cookie.js"></script>
  <script src="js/cart.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"> </script>
  <link rel="stylesheet" href="css/details.css">

</head>

<body>
  <header></header>
  <section id="details">
    <div class="top">
      首页&gt;对戒&gt;18k
    </div>
    <div class="bottom" id="bottom11">

    </div>
  </section>
  <footer></footer>
  <script src="js/axios.min.js"></script>
  <script>
    $(function () {
      let pid = getCookie("pid");
      let userId = getCookie('uid')
      function init() {
        load();
        getDatas();
        setTimeout(() => {
          aaaa();
          addCart()
        }, 100);
        // glass();
      }
      function getDatas() {
        //  43288
        $.get(`http://jx.xuzhixiang.top/ap/api/detail.php?id=` + pid, data => {
          data = data.data;
          // console.log(data);
          let str = ` 
            <div class="left">
                <div class="top" id="da" class="da">
                  <img src="${data.pimg.split(",")[0]}" alt="">
                </div>
                <div class="top" id="dada" class="dada">
                  <img src="${data.pimg.split(",")[0]}" alt="">
                </div>
                <div class="bottom" id="bImgSrc">
                  <img src="${data.pimg.split(",")[0]}" alt="">
                  <img src="${data.pimg.split(",")[1]}" alt="">
                  <img src="${data.pimg.split(",")[2]}" alt="">
                  <img src="${data.pimg.split(",")[3]}" alt="">
                </div>
            </div>
            <div class="right" >
              <div class="top">
                <div class="top1_1 title">${data.pname}</div>
                <div class="top2_1">
                  <div class="price_name">价格</div>
                  <div class="price"> ￥${data.pprice}</div>
                  <div class="sell_name">售出</div>
                  <div class="sell">${data.pdesc}</div>
                  <div class="discuss_name">评论</div>
                  <div class="discuss">107</div>
                </div>
                <div class="top3_1">
                  <div class="left_1">品名</div>
                  <div class="right_1">18k金钻石戒指</div>
                </div>
                <div class="top3_1">
                  <div class="left_1">砖石</div>
                  <div class="right_1">男戒　主钻0颗 0.00克拉女戒　主钻9颗 0.03克拉 辅钻8颗 0.02克拉</div>
                </div>
                <div class="top3_1">
                  <div class="left_1">配送</div>
                  <div class="right_1">2020-11-07</div>
                </div>
                <div class="top6_1"></div>
                <div class="top4_1">
                  <div class="left_1">材质</div>
                  <div class="right_1">
                    <div class="items">黄18k金</div>
                    <div class="items">红18k金</div>
                    <div class="items">白18k金</div>
                  </div>
                </div>
                <div class="top5_1">
                  <div class="left_1">手寸</div>
                  <div class="right_1">
                    <ul class="inf_txtsize_ul">
                      <li class="qualitySizeM" onMouseOver="this.className='qualitySizeMHover'"
                        onMouseOut="this.className='qualitySizeM'">
                        <input class="qualitySizeMBg" type="text" id="manSize" readonly="readonly" value="18" />
                        <div class="qualitySizeMList">
                          <span class="qualitySizeOpt">13</span>
                          <span class="qualitySizeOpt">14</span>
                          <span class="qualitySizeOpt">15</span>
                          <span class="qualitySizeOpt">16</span>
                          <span class="qualitySizeOpt">17</span>
                          <span class="qualitySizeOpt">18</span>
                          <span class="qualitySizeOpt">19</span>
                          <span class="qualitySizeOpt">20</span>
                          <span class="qualitySizeOpt">21</span>
                          <span class="qualitySizeOpt">22</span>
                          <span class="qualitySizeOpt">23</span>
                        </div>
                      </li>
                      <li class="qualitySizeF" onMouseOver="this.className='qualitySizeFHover'"
                        onMouseOut="this.className='qualitySizeF'">
                        <input class="qualitySizeFBg" type="text" id="womanSize" readonly="readonly" value="12" />
                        <div class="qualitySizeFList">
                          <span class="qualitySizeOpt">7</span>
                          <span class="qualitySizeOpt">8</span>
                          <span class="qualitySizeOpt">9</span>
                          <span class="qualitySizeOpt">10</span>
                          <span class="qualitySizeOpt">11</span>
                          <span class="qualitySizeOpt">12</span>
                          <span class="qualitySizeOpt">13</span>
                          <span class="qualitySizeOpt">14</span>
                          <span class="qualitySizeOpt">15</span>
                        </div>
                      </li>
                      <li>
                        <a href="javascript:void(0)" onclick="showHowToMeasure()" class="howToMeasure_txt">如何测手寸</a>
                      </li>
                      <li>
                        <a id="kezishow" href="javascript:void(0)" class="howToMeasure_txt" style="margin-left:10px;">添加刻字</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="bottom1" id="addCart111" data-id="${data.pid}">加入购物车</div>

            </div>`
          $("#bottom11").html(str)

        })
      }
      function aaaa() {
        $("#bImgSrc img").click(function () {
          // 取图片的路径并替换         
          $("#da img")[0].src = this.src
        })
      }
      function addCart() {
        $("#addCart111").click(function () {
          // console.log(this.attr("data-id"));
          // 取id然后存到setCookie里面
          console.log($(this).attr("data-id"));
          let pid = $(this).attr("data-id")
          console.log(pid);

          // 用接口存储
          $.get(`http://jx.xuzhixiang.top/ap/api/add-product.php?uid=${userId}&pid=${pid}&pnum=1`);
          console.log(Boolean(userId));
          if (Boolean(userId)) {
            alert("加入成功")
          } else {
            console.log(userId);
            alert("您未登录，点击跳转登录页面")
            // window.location.href("login.html")
            $(location).attr('href', 'login.html');
          }

        })
      }

      // 引用头部和尾部的文件
      function load() {

        $("header").load("_header.html");
        $("footer").load("_footer.html");

      }
      init();
    })
  </script>

</body>

</html>